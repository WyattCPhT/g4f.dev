<!DOCTYPE html>
<html lang="en" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>G4F - Interference API Usage Guide</title>

    <meta name="description" content="GPT4Free documentation for G4F - Interference API Usage Guide. Complete guides, examples, and API reference for free AI endpoints, code generation, and AI model integration." />
    <meta name="keywords" content="GPT4Free, G4F, AI documentation, free AI API, OpenAI alternative, JavaScript AI client, Python AI library, AI integration, code generation, G4F - Interference API Usage Guide" />
    <meta name="author" content="GPT4Free Team" />

    <!-- Open Graph -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="G4F - Interference API Usage Guide | GPT4Free Documentation" />
    <meta property="og:description" content="GPT4Free documentation for G4F - Interference API Usage Guide. Free AI endpoints, examples, and comprehensive guides." />
    <meta property="og:url" content="https://g4f.dev/docs/interference-api.html" />
    <meta property="og:site_name" content="GPT4Free Documentation" />
    <meta property="og:image" content="https://g4f.dev/dist/img/apple-touch-icon.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="G4F - Interference API Usage Guide | GPT4Free Documentation" />
    <meta name="twitter:description" content="Free AI endpoints and comprehensive documentation for G4F - Interference API Usage Guide." />
    <meta name="twitter:image" content="https://g4f.dev/dist/img/apple-touch-icon.png" />

    <!-- Canonical -->
    <link rel="canonical" href="https://g4f.dev/docs/interference-api.html" />

    <link rel="apple-touch-icon" sizes="180x180" href="/dist/img/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/dist/img/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/dist/img/favicon-16x16.png" />
    <link rel="manifest" href="/dist/img/site.webmanifest" />

    <!-- GitHub Primer CSS & styles -->
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/light-74231a1f3bbb.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark-8a995f0bacd4.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-primitives-225433424a87.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-b8b91660c29d.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-205098e9fedd.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/code-177d21388df8.css" />

    
    <style>
        :root {
            --accent: #8b3dff;
            --background: #16101b;
            --text-primary: #ddd;
            --text-secondary: #9b7dff;
            --card-bg: #1e152e;
            --border-color: #333;
            --hover-color: #a67eff;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--background);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            display: flex;
            max-width: 100%;
            margin: 0;
            padding: 2rem;
            gap: 3rem;
            min-height: calc(100vh - 4rem);
        }

        /* Enhanced main content styling */
        main {
            flex: 1;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.7);
            overflow-wrap: break-word;
            position: relative;
        }

        /* Typography improvements */
        .markdown-body h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            border-bottom: 3px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        .markdown-body h2 {
            margin-top: 3rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .markdown-body h3 {
            margin-top: 2rem;
            margin-bottom: 0.8rem;
            color: var(--text-primary);
        }

        .markdown-body p {
            margin-bottom: 1.2rem;
            color: var(--text-primary);
        }

        /* Enhanced link styling */
        .markdown-body a {
            color: var(--accent);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .markdown-body a:hover,
        .markdown-body a:focus {
            color: var(--hover-color);
            outline: none;
            text-decoration: underline;
            text-shadow: 0 0 8px rgba(139, 61, 255, 0.3);
        }

        /* Enhanced code block styling */
        .markdown-body pre {
            border-radius: 12px;
            padding: 1.5rem !important;
            font-size: 0.95rem !important;
            overflow-x: auto;
            max-height: 500px;
            box-shadow: inset 0 0 12px rgba(0,0,0,0.6), 0 4px 20px rgba(0,0,0,0.4);
            color: #fff;
            border: 1px solid #3d2a5c;
            position: relative;
        }

        .markdown-body pre:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--hover-color));
            border-radius: 12px 12px 0 0;
        }

        .markdown-body code {
            font-family: 'SF Mono', 'Cascadia Code', 'Roboto Mono', Consolas, Liberation Mono, Menlo, monospace;
            background: rgba(139, 61, 255, 0.1);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            color: #e6ccff;
            font-size: 0.9em;
        }

        .markdown-body pre code {
            background: transparent;
            padding: 0;
            color: var(--fgColor-default, var(--color-fg-default))
        }

        /* Table styling */
        .markdown-body table {
            border-collapse: collapse;
            width: 100%;
            margin: 2rem 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .markdown-body table th,
        .markdown-body table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .markdown-body table th {
            background: var(--accent);
            color: white;
            font-weight: 600;
        }

        .markdown-body table tr:nth-child(even) {
            background: rgba(139, 61, 255, 0.05);
        }

        .markdown-body table tr {
            background-color: transparent;
        }

        /* List styling */
        .markdown-body ul, 
        .markdown-body ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }

        .markdown-body li {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Blockquote styling */
        .markdown-body blockquote {
            border-left: 4px solid var(--accent);
            background: rgba(139, 61, 255, 0.1);
            margin: 2rem 0;
            padding: 1rem 1.5rem;
            border-radius: 0 8px 8px 0;
        }

        /* HR styling */
        .markdown-body hr {
            border: none;
            border-top: 2px solid var(--accent);
            margin: 3rem 0;
            opacity: 0.6;
        }

        /* Sticky table of contents */
        nav#toc {
            flex: 0 0 280px;
            position: sticky;
            top: 2rem;
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.7);
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid rgba(139, 61, 255, 0.2);
        }

        nav#toc h2 {
            font-size: 1.4rem;
            margin: 0 0 1.5rem 0;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 0.5rem;
            color: var(--text-primary);
        }

        nav#toc ul {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }

        nav#toc li {
            margin-bottom: 0.8rem;
        }

        nav#toc a {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            padding: 0.3rem 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        nav#toc a:hover, 
        nav#toc a:focus {
            background: rgba(139, 61, 255, 0.1);
            color: var(--hover-color);
            text-decoration: none;
            transform: translateX(4px);
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                padding: 1rem;
                gap: 2rem;
            }

            nav#toc {
                position: relative;
                max-height: none;
                order: -1;
                flex: none;
            }

            .markdown-body h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }

            main {
                padding: 1.5rem;
            }

            .markdown-body h1 {
                font-size: 1.8rem;
            }

            .markdown-body pre {
                padding: 1rem !important;
                font-size: 0.85rem !important;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Focus indicators */
        *:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        /* Print styles */
        @media print {
            .container {
                display: block;
            }
            
            nav#toc {
                display: none;
            }
            
            main {
                box-shadow: none;
                background: white;
                color: black;
            }
        }

        /* Loading animation for syntax highlighting */
        .highlight-loading {
            position: relative;
            opacity: 0.7;
        }

        .highlight-loading::after {
            content: 'Loading syntax highlighting...';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Translate Button Style */
        #translate-toggle {
            display: block;
            background: var(--accent);
            color: #fff;
            text-align: center;
            padding: 0.5rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            cursor: pointer;
            font-size: 0.9rem;
            border: none;
        }
        #google_translate_element {
            margin-bottom: 1rem;
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "G4F - Interference API Usage Guide",
      "description": "GPT4Free documentation for G4F - Interference API Usage Guide. Complete guides, examples, and API reference for free AI endpoints.",
      "author": {
        "@type": "Organization",
        "@id": "https://g4f.dev/#organization",
        "name": "GPT4Free",
        "url": "https://g4f.dev",
        "logo": {
          "@type": "ImageObject",
          "url": "https://g4f.dev/dist/img/apple-touch-icon.png"
        }
      },
      "publisher": {
        "@type": "Organization",
        "@id": "https://g4f.dev/#organization"
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://g4f.dev/docs/interference-api.html"
      },
      "datePublished": "2024-01-01T00:00:00Z",
      "dateModified": "2024-01-01T00:00:00Z",
      "inLanguage": "en",
      "isAccessibleForFree": true,
      "keywords": "GPT4Free, AI documentation, free AI API, code generation",
      "articleSection": "Documentation"
    }
    </script>
</head>
<body>
    <div class="container">
        <nav id="toc" aria-label="Table of contents" role="navigation">
            <!-- Translation Button -->
            <button id="translate-toggle">🌐 Translate Page</button>
            <div id="google_translate_element" style="display:none;"></div>
            <h2>Contents</h2>
            <ul id="toc-list">
                <!-- Table of contents will be generated here -->
            </ul>
            <hr style="margin: 1.5rem 0; opacity: 0.3;">
            <ul>
                <li><a href="/docs/" aria-label="Return to documentation home">📚 Documentation Hub</a></li>
                <li><a href="/" aria-label="Return to main site">🏠 G4F Home</a></li>
            </ul>
        </nav>

        <main role="main" class="markdown-body entry-content" itemprop="text" itemscope itemtype="https://schema.org/TechArticle">
<h2>G4F - Interference API Usage Guide</h2>
<h2>Table of Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#running-the-interference-api">Running the Interference API</a></li>
<li><a href="#from-pypi-package">From PyPI Package</a></li>
<li><a href="#from-repository">From Repository</a></li>
<li><a href="#using-the-interference-api">Using the Interference API</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#using-the-openai-library">Using the OpenAI Library</a></li>
<li><a href="#with-requests-library">With Requests Library</a></li>
<li><a href="#selecting-a-provider">Selecting a Provider</a></li>
<li><a href="#key-points">Key Points</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<h2>Introduction</h2>
<p>The G4F Interference API is a powerful tool that allows you to serve other OpenAI integrations using G4F (Gpt4free). It acts as a proxy, translating requests intended for the OpenAI API into requests compatible with G4F providers. This guide will walk you through the process of setting up, running, and using the Interference API effectively.</p>
<h2>Running the Interference API</h2>
<p><strong>You can run the Interference API in two ways:</strong> using the PyPI package or from the repository.</p>
<h3>From PyPI Package</h3>
<p><strong>To run the Interference API directly from the G4F PyPI package, use the following Python code:</strong></p>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">from</span> <span class="pl-s1">g4f</span>.<span class="pl-s1">api</span> <span class="pl-k">import</span> <span class="pl-s1">run_api</span>

<span class="pl-en">run_api</span>()</pre></div>
<h3>From Repository</h3>
<p><strong>If you prefer to run the Interference API from the cloned repository, you have two options:</strong></p>
<ol>
<li><strong>Using the command line:</strong></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">g4f api</pre></div>
<ol start="2">
<li><strong>Using Python:</strong></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">python -m g4f.api.run</pre></div>
<p><strong>Once running, the API will be accessible at:</strong> <code class="notranslate">http://localhost:1337/v1</code></p>
<p><strong>(Advanced) Bind to custom port:</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">python -m g4f.cli api --bind <span class="pl-s"><span class="pl-pds">"</span>0.0.0.0:2400<span class="pl-pds">"</span></span> </pre></div>
<h2>Using the Interference API</h2>
<h3>Basic Usage</h3>
<p><strong>You can interact with the Interference API using curl commands for both text and image generation:</strong></p>
<p><strong>For text generation:</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">curl -X POST <span class="pl-s"><span class="pl-pds">"</span>http://localhost:1337/v1/chat/completions<span class="pl-pds">"</span></span> \
     -H <span class="pl-s"><span class="pl-pds">"</span>Content-Type: application/json<span class="pl-pds">"</span></span> \
     -d <span class="pl-s"><span class="pl-pds">'</span>{</span>
<span class="pl-s">           "messages": [</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "role": "user",</span>
<span class="pl-s">               "content": "Hello"</span>
<span class="pl-s">             }</span>
<span class="pl-s">           ],</span>
<span class="pl-s">           "model": "gpt-4o-mini"</span>
<span class="pl-s">         }<span class="pl-pds">'</span></span></pre></div>
<p><strong>For image generation:</strong></p>
<ol>
<li><strong>url:</strong></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">curl -X POST <span class="pl-s"><span class="pl-pds">"</span>http://localhost:1337/v1/images/generate<span class="pl-pds">"</span></span> \
     -H <span class="pl-s"><span class="pl-pds">"</span>Content-Type: application/json<span class="pl-pds">"</span></span> \
     -d <span class="pl-s"><span class="pl-pds">'</span>{</span>
<span class="pl-s">           "prompt": "a white siamese cat",</span>
<span class="pl-s">           "model": "flux",</span>
<span class="pl-s">           "response_format": "url"</span>
<span class="pl-s">         }<span class="pl-pds">'</span></span></pre></div>
<ol start="2">
<li><strong>b64_json</strong></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">curl -X POST <span class="pl-s"><span class="pl-pds">"</span>http://localhost:1337/v1/images/generate<span class="pl-pds">"</span></span> \
     -H <span class="pl-s"><span class="pl-pds">"</span>Content-Type: application/json<span class="pl-pds">"</span></span> \
     -d <span class="pl-s"><span class="pl-pds">'</span>{</span>
<span class="pl-s">           "prompt": "a white siamese cat",</span>
<span class="pl-s">           "model": "flux",</span>
<span class="pl-s">           "response_format": "b64_json"</span>
<span class="pl-s">         }<span class="pl-pds">'</span></span></pre></div>
<hr>
<h3>Using the OpenAI Library</h3>
<p><strong>To utilize the Interference API with the OpenAI Python library, you can specify the <code class="notranslate">base_url</code> to point to your endpoint:</strong></p>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">from</span> <span class="pl-s1">openai</span> <span class="pl-k">import</span> <span class="pl-v">OpenAI</span>

<span class="pl-c"># Initialize the OpenAI client</span>
<span class="pl-s1">client</span> <span class="pl-c1">=</span> <span class="pl-en">OpenAI</span>(
    <span class="pl-s1">api_key</span><span class="pl-c1">=</span><span class="pl-s">"secret"</span>,  <span class="pl-c"># Set an API key (use "secret" if your provider doesn't require one)</span>
    <span class="pl-s1">base_url</span><span class="pl-c1">=</span><span class="pl-s">"http://localhost:1337/v1"</span>  <span class="pl-c"># Point to your local or custom API endpoint</span>
)

<span class="pl-c"># Create a chat completion request</span>
<span class="pl-s1">response</span> <span class="pl-c1">=</span> <span class="pl-s1">client</span>.<span class="pl-c1">chat</span>.<span class="pl-c1">completions</span>.<span class="pl-c1">create</span>(
    <span class="pl-s1">model</span><span class="pl-c1">=</span><span class="pl-s">"gpt-4o-mini"</span>,  <span class="pl-c"># Specify the model to use</span>
    <span class="pl-s1">messages</span><span class="pl-c1">=</span>[{<span class="pl-s">"role"</span>: <span class="pl-s">"user"</span>, <span class="pl-s">"content"</span>: <span class="pl-s">"Write a poem about a tree"</span>}],  <span class="pl-c"># Define the input message</span>
    <span class="pl-s1">stream</span><span class="pl-c1">=</span><span class="pl-c1">True</span>,  <span class="pl-c"># Enable streaming for real-time responses</span>
)

<span class="pl-c"># Handle the response</span>
<span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">response</span>, <span class="pl-s1">dict</span>):
    <span class="pl-c"># Non-streaming response</span>
    <span class="pl-en">print</span>(<span class="pl-s1">response</span>.<span class="pl-c1">choices</span>[<span class="pl-c1">0</span>].<span class="pl-c1">message</span>.<span class="pl-c1">content</span>)
<span class="pl-k">else</span>:
    <span class="pl-c"># Streaming response</span>
    <span class="pl-k">for</span> <span class="pl-s1">token</span> <span class="pl-c1">in</span> <span class="pl-s1">response</span>:
        <span class="pl-s1">content</span> <span class="pl-c1">=</span> <span class="pl-s1">token</span>.<span class="pl-c1">choices</span>[<span class="pl-c1">0</span>].<span class="pl-c1">delta</span>.<span class="pl-c1">content</span>
        <span class="pl-k">if</span> <span class="pl-s1">content</span> <span class="pl-c1"><span class="pl-c1">is</span> <span class="pl-c1">not</span></span> <span class="pl-c1">None</span>:
            <span class="pl-en">print</span>(<span class="pl-s1">content</span>, <span class="pl-s1">end</span><span class="pl-c1">=</span><span class="pl-s">""</span>, <span class="pl-s1">flush</span><span class="pl-c1">=</span><span class="pl-c1">True</span>)</pre></div>
<p><strong>Notes:</strong></p>
<ul>
<li>The <code class="notranslate">api_key</code> is required by the OpenAI Python library. If your provider does not require an API key, you can set it to <code class="notranslate">"secret"</code>. This value will be ignored by providers in G4F.</li>
<li>Replace <code class="notranslate">"http://localhost:1337/v1"</code> with the appropriate URL for your custom or local interference API.</li>
</ul>
<hr>
<h3>With Requests Library</h3>
<p><strong>You can also send requests directly to the Interference API using the <code class="notranslate">requests</code> library:</strong></p>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-s1">requests</span>

<span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"http://localhost:1337/v1/chat/completions"</span>

<span class="pl-s1">body</span> <span class="pl-c1">=</span> {
    <span class="pl-s">"model"</span>: <span class="pl-s">"gpt-4o-mini"</span>,
    <span class="pl-s">"stream"</span>: <span class="pl-c1">False</span>,
    <span class="pl-s">"messages"</span>: [
        {<span class="pl-s">"role"</span>: <span class="pl-s">"assistant"</span>, <span class="pl-s">"content"</span>: <span class="pl-s">"What can you do?"</span>}
    ]
}

<span class="pl-s1">json_response</span> <span class="pl-c1">=</span> <span class="pl-s1">requests</span>.<span class="pl-c1">post</span>(<span class="pl-s1">url</span>, <span class="pl-s1">json</span><span class="pl-c1">=</span><span class="pl-s1">body</span>).<span class="pl-c1">json</span>().<span class="pl-c1">get</span>(<span class="pl-s">'choices'</span>, [])

<span class="pl-k">for</span> <span class="pl-s1">choice</span> <span class="pl-c1">in</span> <span class="pl-s1">json_response</span>:
    <span class="pl-en">print</span>(<span class="pl-s1">choice</span>.<span class="pl-c1">get</span>(<span class="pl-s">'message'</span>, {}).<span class="pl-c1">get</span>(<span class="pl-s">'content'</span>, <span class="pl-s">''</span>))</pre></div>
<h2>Selecting a Provider</h2>
<p><strong>Provider Selection</strong>: <a href="selecting_a_provider">How to Specify a Provider?</a></p>
<p>Selecting the right provider is a key step in configuring the G4F Interference API to suit your needs. Refer to the guide linked above for detailed instructions on choosing and specifying a provider.</p>
<h2>Key Points</h2>
<ul>
<li>The Interference API translates OpenAI API requests into G4F provider requests.</li>
<li>It can be run from either the PyPI package or the cloned repository.</li>
<li>The API supports usage with the OpenAI Python library by changing the <code class="notranslate">base_url</code>.</li>
<li>Direct requests can be sent to the API endpoints using libraries like <code class="notranslate">requests</code>.</li>
<li>Both text and image generation are supported.</li>
</ul>
<h2>Conclusion</h2>
<p>The G4F Interference API provides a seamless way to integrate G4F with existing OpenAI-based applications and tools. By following this guide, you should now be able to set up, run, and use the Interference API effectively. Whether you're using it for text generation, image creation, or as a drop-in replacement for OpenAI in your projects, the Interference API offers flexibility and power for your AI-driven applications.</p>
<hr>
<p><a href="/docs/">Return to Documentation</a></p>
</main>
    </div>

    
    <script>
        // Toggle Translation Widget
        document.getElementById("translate-toggle").addEventListener("click", function() {
            const el = document.getElementById("google_translate_element");
            el.style.display = (el.style.display === "none") ? "block" : "none";
        });

        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        // Enhanced syntax highlighting with error handling
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Generate table of contents
                generateTableOfContents();
            } catch (error) {
                console.error('Error generating table of contents:', error);
            }
        });

        function generateTableOfContents() {
            const headings = document.querySelectorAll('main h2, main h3');
            const tocList = document.getElementById('toc-list');
            
            if (!tocList || headings.length === 0) return;
            
            tocList.innerHTML = '';
            
            headings.forEach(function(heading, index) {
                const id = heading.id || `heading-${index}`;
                if (!heading.id) {
                    heading.id = id;
                }
                
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = `#${id}`;
                a.textContent = heading.textContent;
                a.setAttribute('aria-label', `Jump to ${heading.textContent}`);
                
                if (heading.tagName === 'H3') {
                    li.style.marginLeft = '1rem';
                    li.style.fontSize = '0.9em';
                }
                
                li.appendChild(a);
                tocList.appendChild(li);
            });
        }

        // Smooth scrolling for anchor links
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {
                e.preventDefault();
                const target = document.querySelector(e.target.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });

        // Add copy button to code blocks
        document.querySelectorAll('pre code, .highlight pre').forEach(function(block) {
            const button = document.createElement('button');
            button.textContent = 'Copy';
            button.className = 'copy-button';
            button.style.cssText = `
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                background: rgba(139, 61, 255, 0.8);
                color: white;
                border: none;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.8rem;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            const pre = block.parentElement;
            pre.style.position = 'relative';
            pre.appendChild(button);
            
            pre.addEventListener('mouseenter', function() {
                button.style.opacity = '1';
            });
            
            pre.addEventListener('mouseleave', function() {
                button.style.opacity = '0';
            });
            
            button.addEventListener('click', function() {
                navigator.clipboard.writeText(block.textContent).then(function() {
                    button.textContent = 'Copied!';
                    setTimeout(function() {
                        button.textContent = 'Copy';
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>